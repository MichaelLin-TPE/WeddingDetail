<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>老劉與蔓蒂</title>
    <link rel="icon" href="./images/logo.png" type="image/x-icon" />
    <link rel="stylesheet" href="style.css?v=20251106" />

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/11.0.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore-compat.js"></script>
  </head>

  <body>
    <header>
      <img src="./images/logo.png" alt="logo" class="logo" />
      <h1>💒 老劉與蔓蒂 💝</h1>
      <button id="loginBtn" class="login-button">登入</button>
    </header>

    <section class="search-bar">
      <input id="searchInput" type="text" placeholder="搜尋姓名或編號..." />
      <!-- 🔸 新增名單按鈕 -->
      <button id="addBtn" class="add-button">➕ 新增名單</button>
    </section>

    <main>
      <div class="list-container">
        <h2>👰 女方親友</h2>
        <table id="femaleList" class="money-table">
          <thead>
            <tr>
              <th>編號</th>
              <th>姓名</th>
              <th>金額</th>
              <th>分類</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <div class="total">女方總金額：<span id="femaleTotal">0</span> 元</div>
      </div>

      <div class="list-container">
        <h2>🤵 男方親友</h2>
        <table id="maleList" class="money-table">
          <thead>
            <tr>
              <th>編號</th>
              <th>姓名</th>
              <th>金額</th>
              <th>分類</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <div class="total">男方總金額：<span id="maleTotal">0</span> 元</div>
      </div>
    </main>
    <!-- 🔸 登入彈窗 -->
    <div id="loginPopup" class="popup hidden">
      <div class="popup-content login">
        <span id="closeLogin" class="close">&times;</span>
        <h2>系統登入</h2>
        <form id="loginForm">
          <label>帳號：</label>
          <input
            type="text"
            id="loginAccount"
            placeholder="請輸入帳號"
            required
          />

          <label>密碼：</label>
          <input
            type="password"
            id="loginPassword"
            placeholder="請輸入密碼"
            required
          />

          <button type="submit" class="submit-btn">登入</button>
        </form>
      </div>
    </div>

    <!-- 🔸 新增名單彈窗 -->
    <div id="popup" class="popup hidden">
      <div class="popup-content">
        <span id="closePopup" class="close">&times;</span>
        <h2>新增名單</h2>
        <form id="addForm">
          <label>姓名：</label>
          <input type="text" id="nameInput" placeholder="請輸入姓名" required />

          <label>身分類別：</label>
          <select id="typeSelect" required>
            <option value="female_friends">👰 女方親友</option>
            <option value="male_friends">🤵 男方親友</option>
          </select>

          <label>禮金金額：</label>
          <input
            type="number"
            id="moneyInput"
            placeholder="請輸入金額"
            min="0"
            required
          />

          <button type="submit" class="submit-btn">送出</button>
        </form>
      </div>
    </div>

    <!-- 🔸 刪除確認彈窗 -->
    <div id="deletePopup" class="popup hidden">
      <div class="popup-content">
        <h2>確認刪除</h2>
        <p id="deleteMessage">確定要刪除這筆資料嗎？</p>
        <div
          style="
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
          "
        >
          <button
            id="cancelDeleteBtn"
            class="submit-btn"
            style="background: #ccc"
          >
            取消
          </button>
          <button
            id="confirmDeleteBtn"
            class="submit-btn"
            style="background: #ff4d6d"
          >
            確認刪除
          </button>
        </div>
      </div>
    </div>

    <!-- 🔸 編輯資料彈窗 -->
    <div id="editPopup" class="popup hidden">
      <div class="popup-content">
        <h2>編輯資料</h2>

        <form id="editForm">
          <label for="editName">姓名：</label>
          <input type="text" id="editName" required />

          <label for="editMoney">禮金金額：</label>
          <input type="number" id="editMoney" required />

          <div
            style="
              display: flex;
              justify-content: center;
              gap: 15px;
              margin-top: 20px;
            "
          >
            <button
              type="button"
              id="cancelEditBtn"
              class="submit-btn"
              style="background: #ccc"
            >
              取消
            </button>
            <button type="submit" class="submit-btn">儲存變更</button>
          </div>
        </form>
      </div>
    </div>

    <footer>
      <p>💍 感謝每一位親友的祝福 💕</p>
    </footer>

    <script src="index.js?v=20251106"></script>
  </body>
</html>
